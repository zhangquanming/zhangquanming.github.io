(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{423:function(v,_,l){"use strict";l.r(_);var i=l(52),t=Object(i.a)({},(function(){var v=this,_=v.$createElement,l=v._self._c||_;return l("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[l("h2",{attrs:{id:"编码优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#编码优化"}},[v._v("#")]),v._v(" 编码优化")]),v._v(" "),l("p",[v._v("编码优化，指的就是 在代码编写时的，通过一些最佳实践，提升代码的执行性能。通常这并不会带来非常大的收益，但这属于程序猿的自我修养，而且这也是面试中经常被问到的一个方面，考察自我管理与细节的处理。")]),v._v(" "),l("ul",[l("li",[l("p",[l("strong",[v._v("数据读取")])]),v._v(" "),l("ul",[l("li",[v._v("通过作用域链 / 原型链 读取变量或方法时，需要更多的耗时，且越长越慢")]),v._v(" "),l("li",[v._v("对象嵌套越深，读取值也越慢")]),v._v(" "),l("li",[l("strong",[v._v("最佳实践")]),v._v(" "),l("ul",[l("li",[v._v("尽量在局部作用域中进行 "),l("strong",[v._v("变量缓存")])]),v._v(" "),l("li",[v._v("避免嵌套过深的数据结构，"),l("strong",[v._v("数据扁平化")]),v._v(" 有利于数据的读取和维护")])])])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("循环")]),v._v(": 循环通常是编码性能的关键点")]),v._v(" "),l("ul",[l("li",[v._v("代码的性能问题会再循环中被指数倍放大")]),v._v(" "),l("li",[l("strong",[v._v("最佳实践")]),v._v(" "),l("ul",[l("li",[v._v("尽可能 "),l("strong",[v._v("减少循环次数")]),v._v(" "),l("ul",[l("li",[v._v("减少遍历的数据量")]),v._v(" "),l("li",[v._v("完成目的后马上结束循环")])])]),v._v(" "),l("li",[v._v("避免在循环中执行大量的运算，避免重复计算，相同的执行结果应该使用缓存")]),v._v(" "),l("li",[v._v("js 中使用 "),l("strong",[v._v("倒序循环")]),v._v(" 会略微提升性能")]),v._v(" "),l("li",[v._v("尽量避免使用 for-in 循环，因为它会枚举原型对象，耗时大于普通循环")])])])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("条件流程性能")]),v._v(": Map / Object > switch > if-else")])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("减少 cookie 体积")]),v._v(": 能有效减少每次请求的体积和响应时间")]),v._v(" "),l("ul",[l("li",[v._v("去除不必要的 cookie")]),v._v(" "),l("li",[v._v("压缩 cookie 大小")]),v._v(" "),l("li",[v._v("设置 domain 与 过期时间")])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("dom 优化")])]),v._v(" "),l("ul",[l("li",[l("strong",[v._v("减少访问 dom 的次数")]),v._v("，如需多次，将 dom 缓存于变量中")]),v._v(" "),l("li",[l("strong",[v._v("减少重绘与回流")]),v._v(" "),l("ul",[l("li",[v._v("多次操作合并为一次")]),v._v(" "),l("li",[v._v("减少对计算属性的访问\n"),l("ul",[l("li",[v._v("例如 offsetTop， getComputedStyle 等")]),v._v(" "),l("li",[v._v("因为浏览器需要获取最新准确的值，因此必须立即进行重排，这样会破坏了浏览器的队列整合，尽量将值进行缓存使用")])])]),v._v(" "),l("li",[v._v("大量操作时，可将 dom 脱离文档流或者隐藏，待操作完成后再重新恢复")]),v._v(" "),l("li",[v._v("使用 "),l("code",[v._v("DocumentFragment")]),v._v(" / "),l("code",[v._v("cloneNode")]),v._v(" / "),l("code",[v._v("replaceChild")]),v._v(" 进行操作")])])]),v._v(" "),l("li",[v._v("使用事件委托，避免大量的事件绑定")])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("css 优化")])]),v._v(" "),l("ul",[l("li",[v._v("层级扁平，避免过于多层级的选择器嵌套")]),v._v(" "),l("li",[v._v("特定的选择器 好过一层一层查找: .xxx-child-text{} 优于 .xxx .child .text{}")]),v._v(" "),l("li",[v._v("减少使用通配符与属性选择器")]),v._v(" "),l("li",[v._v("减少不必要的多余属性")]),v._v(" "),l("li",[v._v("使用 动画属性 实现动画，动画时脱离文档流，开启硬件加速，优先使用 css 动画")]),v._v(" "),l("li",[v._v("使用 "),l("code",[v._v("<link>")]),v._v(" 替代原生 @import")])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("html 优化")])]),v._v(" "),l("ul",[l("li",[v._v("减少 dom 数量，避免不必要的节点或嵌套")]),v._v(" "),l("li",[v._v("避免 "),l("code",[v._v('<img src="" />')]),v._v(" 空标签，能减少服务器压力，因为 src 为空时，浏览器仍然会发起请求\n"),l("ul",[l("li",[v._v("IE 向页面所在的目录发送请求")]),v._v(" "),l("li",[v._v("Safari、Chrome、Firefox 向页面本身发送请求")]),v._v(" "),l("li",[v._v("Opera 不执行任何操作")])])]),v._v(" "),l("li",[v._v("图片提前 指定宽高 或者 脱离文档流，能有效减少因图片加载导致的页面回流")]),v._v(" "),l("li",[v._v("语义化标签 有利于 SEO 与浏览器的解析时间")]),v._v(" "),l("li",[v._v("减少使用 table 进行布局，避免使用 "),l("code",[v._v("<br />")]),v._v(" 与 "),l("code",[v._v("<hr />")])])])])]),v._v(" "),l("h2",{attrs:{id:"页面基础优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#页面基础优化"}},[v._v("#")]),v._v(" 页面基础优化")]),v._v(" "),l("ul",[l("li",[l("p",[l("strong",[v._v("引入位置")]),v._v(": css 文件 "),l("code",[v._v("<head>")]),v._v(" 中引入， js 文件 "),l("code",[v._v("<body>")]),v._v(" 底部引入")]),v._v(" "),l("ul",[l("li",[v._v("影响首屏的，优先级很高的 js 也可以头部引入，甚至内联")])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("减少请求")]),v._v(" (http 1.0 - 1.1)，合并请求，正确设置 http 缓存")])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("减少文件体积")])]),v._v(" "),l("ul",[l("li",[l("strong",[v._v("删除多余代码")]),v._v(" "),l("ul",[l("li",[v._v("tree-shaking")]),v._v(" "),l("li",[v._v("UglifyJs")]),v._v(" "),l("li",[v._v("code-spliting")])])]),v._v(" "),l("li",[l("strong",[v._v("混淆 / 压缩代码")]),v._v("，开启 gzip 压缩")]),v._v(" "),l("li",[l("strong",[v._v("多份编译文件按条件引入")]),v._v(" "),l("ul",[l("li",[v._v("针对现代浏览器直接给 ES6 文件，只针对低端浏览器引用编译后的 ES5 文件")]),v._v(" "),l("li",[v._v("可以利用 "),l("code",[v._v('<script type="module">')]),v._v(" / "),l("code",[v._v('<script type="module">')]),v._v(" 进行条件引入用")])])]),v._v(" "),l("li",[l("strong",[v._v("动态 polyfill")]),v._v("，只针对不支持的浏览器引入 polyfill")])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("图片优化")])]),v._v(" "),l("ul",[l("li",[v._v("根据业务场景，与 UI 探讨选择 "),l("strong",[v._v("合适质量，合适尺寸")])]),v._v(" "),l("li",[v._v("根据需求和平台，选择 "),l("strong",[v._v("合适格式")]),v._v("，例如非透明时可用 jpg；非苹果端，使用 webp")]),v._v(" "),l("li",[v._v("小图片合成 "),l("strong",[v._v("雪碧图")]),v._v("，低于 5K 的图片可以转换成 "),l("strong",[v._v("base64")]),v._v(" 内嵌")]),v._v(" "),l("li",[v._v("合适场景下，使用 "),l("strong",[v._v("iconfont")]),v._v(" 或者 "),l("strong",[v._v("svg")])])])]),v._v(" "),l("li",[l("p",[l("strong",[v._v("使用缓存")])]),v._v(" "),l("ul",[l("li",[l("strong",[v._v("浏览器缓存")]),v._v(": 通过设置请求的过期时间，合理运用浏览器缓存")]),v._v(" "),l("li",[l("strong",[v._v("CDN 缓存")]),v._v(": 静态文件合理使用 CDN 缓存技术\n"),l("ul",[l("li",[v._v("HTML 放于自己的服务器上")]),v._v(" "),l("li",[v._v("打包后的图片 / js / css 等资源上传到 CDN 上，文件带上 hash 值")]),v._v(" "),l("li",[v._v("由于浏览器对单个域名请求的限制，可以将资源放在多个不同域的 CDN 上，可以绕开该限制")])])]),v._v(" "),l("li",[l("strong",[v._v("服务器缓存")]),v._v(": 将不变的数据、页面缓存到 内存 或 远程存储(redis 等) 上")]),v._v(" "),l("li",[l("strong",[v._v("数据缓存")]),v._v(": 通过各种存储将不常变的数据进行缓存，缩短数据的获取时间")])])])]),v._v(" "),l("h2",{attrs:{id:"首屏渲染优化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#首屏渲染优化"}},[v._v("#")]),v._v(" 首屏渲染优化")]),v._v(" "),l("ul",[l("li",[l("strong",[v._v("css / js 分割")]),v._v("，使首屏依赖的文件体积最小，内联首屏关键 css / js")]),v._v(" "),l("li",[v._v("非关键性的文件尽可能的 "),l("strong",[v._v("异步加载和懒加载")]),v._v("，避免阻塞首页渲染")]),v._v(" "),l("li",[v._v("使用 "),l("code",[v._v("dns-prefetch")]),v._v(" / "),l("code",[v._v("preconnect")]),v._v(" / "),l("code",[v._v("prefetch")]),v._v(" / "),l("code",[v._v("preload")]),v._v(" 等浏览器提供的资源提示，加快文件传输")]),v._v(" "),l("li",[v._v("谨慎控制好 Web 字体，一个大字体包足够让你功亏一篑\n"),l("ul",[l("li",[v._v("控制字体包的加载时机")]),v._v(" "),l("li",[v._v("如果使用的字体有限，那尽可能只将使用的文字单独打包，能有效减少体积")])])]),v._v(" "),l("li",[v._v("合理利用 Localstorage / server-worker 等存储方式进行 "),l("strong",[v._v("数据与资源缓存")])]),v._v(" "),l("li",[l("strong",[v._v("分清轻重缓急")]),v._v(" "),l("ul",[l("li",[v._v("重要的元素优先渲染")]),v._v(" "),l("li",[v._v("视窗内的元素优先渲染")])])]),v._v(" "),l("li",[l("strong",[v._v("服务端渲染(SSR)")]),v._v(" "),l("ul",[l("li",[v._v("减少首屏需要的数据量，剔除冗余数据和请求")]),v._v(" "),l("li",[v._v("控制好缓存，对数据/页面进行合理的缓存")]),v._v(" "),l("li",[v._v("页面的请求使用流的形式进行传递")])])]),v._v(" "),l("li",[l("strong",[v._v("优化用户感知")]),v._v(" "),l("ul",[l("li",[v._v("利用一些动画 "),l("strong",[v._v("过渡效果")]),v._v("，能有效减少用户对卡顿的感知")]),v._v(" "),l("li",[v._v("尽可能利用 "),l("strong",[v._v("骨架屏(Placeholder) / Loading")]),v._v(" 等减少用户对白屏的感知")]),v._v(" "),l("li",[v._v("动画帧数尽量保证在 "),l("strong",[v._v("30 帧")]),v._v(" 以上，低帧数、卡顿的动画宁愿不要")]),v._v(" "),l("li",[v._v("js 执行时间避免超过 "),l("strong",[v._v("100ms")]),v._v("，超过的话就需要做\n"),l("ul",[l("li",[v._v("寻找可 缓存 的点")]),v._v(" "),l("li",[v._v("任务的 分割异步 或 web worker 执行")])])])])])])])}),[],!1,null,null,null);_.default=t.exports}}]);